/**
 * oneniceapp - nice dev tool
 * @version v0.0.1
 * @author nice-fe
 */
 "use strict";!function(){var t={curImage:$("#cur_img"),scoochContainer:$(".m-scooch"),hotPictures:$(".hot_pictures_carousel"),isShowHotPictures:!1,init:function(){t.scoochContainer.length>0&&(t.isShowHotPictures=!0),t.loadImage(),t.initScooch(),t.bindEvent(),t.resize()},getScreenWidth:function(){return _n.utils.isAndroid||_n.utils.isIos?$(window).width():"320"},bindEvent:function(){var i=$(".hot_pictures img"),o=$(".m-scooch-close");$(window).on("window:resize",function(){t.resize()}),$(window).on("mask:hide",function(){t.hideCarousel()}),i.on("click",function(){var i=$(this).data("index");return $(".m-scooch").scooch("move",i,{animate:!1}),t.showCarousel(),!1}),o.on("click",function(){return t.hideCarousel(),!1})},loadImage:function(){var t=10;_n.utils.isAndroid&&_n.utils.isWeixin&&(t=200),setTimeout(function(){var t=$(".lazyload");t.each(function(){$(this).attr("src",$(this).data("src")),$(this).on("load",function(){}),$(this).on("error",function(){})})},t),$("#btn_mark_download").css({bottom:0})},initScooch:function(){var i=t.getScreenWidth();t.isShowHotPictures&&t.scoochContainer.css({width:i,height:i}).scooch()},showCarousel:function(){t.resetHotPicturesPosition()},resetHotPicturesPosition:function(){var i=$(window).height(),o=this.getScreenWidth()+60;t.isShowHotPictures&&t.hotPictures.css({top:(i-o)/2}).addClass("open").show()},hideCarousel:function(){t.isShowHotPictures&&t.hotPictures.removeClass("open").hide()},resize:function(){setTimeout(function(){var i=t.getScreenWidth(),o=$(".rightTag"),s=$(".leftTag");t.curImage.css({width:i,height:i}),t.isShowHotPictures&&t.scoochContainer.css({width:i,height:i}).scooch("refresh"),o.each(function(){var t,o,s,e=$(this);e.show(),t=""===e.data("width")||isNaN(e.data("width"))?e.find(".tagContentInfo").width():parseInt(e.data("width"),10),o=parseInt(e.data("left"),10),s=parseInt(e.data("top"),10),""===e.data("width")&&e.data("width",t),e.css({left:o/300*i-t-22,top:s/300*i+18})}),s.each(function(){var t,o,s,e=$(this);e.show(),t=e.width(),o=parseInt(e.data("left"),10),s=parseInt(e.data("top"),10),e.css({left:o/300*i-15,top:s/300*i-15})}),t.isShowHotPictures&&t.hotPictures.hasClass("open")&&t.resetHotPicturesPosition()},500)}};t.init()}();